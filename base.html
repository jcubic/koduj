<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>P5.js</title>
    <meta name="Description" content=""/>
    <link rel="shortcut icon" href=""/>
    <!--[if IE]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/p5.js"></script>
<style>
html, body {
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
}
html {
    flex-direction: column;
}
body {
    flex-direction: row;
    margin: 0;
}
canvas {
    margin: auto;
    display: block;
    box-shadow: 0px 2px 12px -2px rgb(0 0 0 / 15%);
}
</style>
</head>
<body>
    <script>
     window.addEventListener('error', function(e) {
         const { message, colno, lineno } = e;
         window.parent.postMessage({
             type: 'error',
             message,
             colno,
             lineno
         });
     });
     document.body.addEventListener('mousemove', (e) => {
         if (e.target.closest('canvas')) {
             const { offsetX: x, offsetY: y } = e;
             window.parent.postMessage({ type: 'mousemove', x, y });
         }
     });
     (log => {
         function is_plain_object(object) {
             return object && typeof object === 'object' && object.constructor === Object;
         }
         function repr(object) {
             if (object) {
                 if (typeof object === 'object') {
                     if (Array.isArray(object)) {
                         return JSON.stringify(object);
                     }
                     if (is_plain_object(object)) {
                         return JSON.stringify(object, null, 2);
                     }
                     var name = object.constructor.name;
                     if (name) {
                         return `#&lt;${name}&gt;`;
                     } else {
                         return object.toString();
                     }
                 } else {
                     return new String(object);
                 }
             }
         }
         console.log = function(...args) {
             window.parent.postMessage({
                 type: 'echo',
                 args: args.map(repr)
             });
             log.apply(console, args);
         };
         console.log.toString = function() {
             return 'log() { [native code] }';
         };
     })(console.log);
     function __screenshot__() {
         const canvas = document.querySelector('canvas');
         canvas.toBlob(function(blob) {
             const url = URL.createObjectURL(blob);
             const a = document.createElement('a');
             a.href = url;
             a.download = 'Canvas.png';
             document.body.appendChild(a);
             a.click();
             setTimeout(() => {
                 a.remove();
                 URL.revokeObjectURL(url);
             }, 0);
         });
     }
      // ref: https://stackoverflow.com/q/67322922/387194
     var __EVAL = (s) => {
        return eval(`void (__EVAL = ${__EVAL.toString()}); ${s}`);
     };
    </script>
    {{HTML}}
    <script src="./{{FILE}}"></script>
</body>
</html>
